<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cell Nuclei Counter - Interactive Analysis Tool</title>
    
    <!-- Bootstrap CSS for styling -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container-fluid">
        <!-- Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="text-center py-4 bg-primary text-white">
                    <h1>üî¨ Cell Nuclei Counter</h1>
                    <p class="mb-0">Interactive Analysis with Multiple Algorithms</p>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="row">
            <!-- Upload Section -->
            <div class="col-12 col-lg-4">
                <div class="card">
                    <div class="card-header">
                        <h5>üìÅ Upload Image</h5>
                    </div>
                    <div class="card-body">
                        <!-- File Upload Area -->
                        <div id="uploadArea" class="upload-area text-center p-4 border border-dashed rounded">
                            <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                            <p>Drag & drop your cell image here or click to browse</p>
                            <input type="file" id="imageInput" accept="image/*" class="d-none">
                            <button class="btn btn-outline-primary" onclick="document.getElementById('imageInput').click()">
                                Browse Files
                            </button>
                        </div>
                        
                        <!-- Method Selection -->
                        <div class="mt-4">
                            <h6>Select Methods to Run:</h6>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="method1" checked>
                                <label class="form-check-label" for="method1">
                                    Otsu + Watershed (Recommended)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="method2" checked>
                                <label class="form-check-label" for="method2">
                                    Adaptive Thresholding
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="method3" checked>
                                <label class="form-check-label" for="method3">
                                    LoG Blob Detection
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="method4" checked>
                                <label class="form-check-label" for="method4">
                                    Multi-scale Watershed
                                </label>
                            </div>
                        </div>

                        <!-- Process Button -->
                        <button id="processBtn" class="btn btn-success w-100 mt-3" disabled>
                            üöÄ Analyze Image
                        </button>
                    </div>
                </div>

                <!-- Progress Section -->
                <div class="card mt-3" id="progressCard" style="display: none;">
                    <div class="card-header">
                        <h6>üîÑ Processing Status</h6>
                    </div>
                    <div class="card-body">
                        <div id="progressBars"></div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="col-12 col-lg-8">
                <div class="card">
                    <div class="card-header">
                        <h5>üìä Results Comparison</h5>
                    </div>
                    <div class="card-body">
                        <div id="resultsContainer">
                            <div class="text-center text-muted py-5">
                                <i class="fas fa-chart-bar fa-3x mb-3"></i>
                                <p>Upload an image and click "Analyze" to see results</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="text-center py-3 text-muted">
                    <p>Built for ZEISS Interview | Multiple Algorithm Comparison Tool</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/your-kit-id.js" crossorigin="anonymous"></script>

     <!-- OpenCV.js for image processing - CRITICAL FOR FUNCTIONALITY -->
     <script async src="https://docs.opencv.org/master/opencv.js" onload="onOpenCvReady();" type="text/javascript"></script>
    
    <!-- Our JavaScript files -->
    <script src="js/app.js"></script>
    <script src="js/methods.js"></script>
</body>
</html>